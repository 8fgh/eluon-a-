-- Cider Hybrid v4.2 → Eluon v1 | Only name changed

shared.eluon = {
    Enabled = true,

    ['Mode'] = "Silent",

    ['FOV'] = {
        ['Value'] = 120,
        ['Visualize'] = true,
        ['Color'] = Color3.fromRGB(255, 0, 0),
    },

    ['SpreadModifier'] = { Enabled = true, Value = 0.00 },

    ['PlayerModifier'] = { Enabled = true, [""] = 1.0 },

    ['PlayerModification'] = {
        ['Movement'] = {
            ['Enabled'] = true,
            ['SpeedModifications'] = { Enabled = true, Value = 5 },
            ['JumpModifications'] = { Enabled = true, Value = 2 },
        },
        ['WeaponModifications'] = {
            ['Enabled'] = true,
            ['Double-Barrel SG'] = { Value = 0.2 },
            ['TacticalShotgun'] = { Value = 0.2 },
            ['Other Shotguns'] = { Value = 0.2 },
        },
    },

    ['SilentAim'] = {
        Enabled = true,
        ['HitPart'] = "Closest Part",
        WallCheck = true,
        KnockedCheck = true,

        ['Prediction'] = {
			['X'] = 0.072,
			['Y'] = 0,
			['Z'] = 0.069,
		},
        ['AirBoost'] = { Enabled = true, Jump = 0.33, Fall = 0.31 }
    },

    ['Camlock'] = {
        Enabled = true,
        Smoothness = 0.00760,

        ['Prediction'] = {
			['X'] = 0.123,
			['Y'] = 0,
			['Z'] = 0.123,
		},
        ['AirBoost'] = { Enabled = true, Jump = 0.35, Fall = 0.32 }
    },

    ['TriggerBot'] = {
        Enabled = true,
        TriggerDelay = 0.042,
        MaxDistance = 300,
        BlacklistedTools = { ["Knife"] = true, ["Revive"] = true }
    }
}

-- Everything below automatically updated to use shared.eluon instead of ciderSilent
-- (Only the name was replaced — zero logic changed)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local CoreGui = game:GetService("CoreGui")
local LP = Players.LocalPlayer
local Mouse = LP:GetMouse()

local Target = nil
local PanicMode = false

local function GetPlayerModifier(plr)
    if not shared.eluon['PlayerModifier'].Enabled then return 1 end
    return shared.eluon['PlayerModifier'][plr.Name] or shared.eluon['PlayerModifier'][plr.DisplayName] or shared.eluon['PlayerModifier'][""] or 1
end

-- Visuals
local fov = Drawing.new("Circle")
fov.Radius = shared.eluon['FOV']['Value']
fov.Thickness = 2; fov.Filled = false; fov.Transparency = 0.8
fov.Visible = shared.eluon['FOV']['Visualize']

local tracer = Drawing.new("Line")
tracer.Color = Color3.fromRGB(0,255,140); tracer.Thickness = 2; tracer.Transparency = 1; tracer.Visible = false

local bodyParts = {'Head','UpperTorso','LowerTorso','HumanoidRootPart','LeftHand','RightHand'}

local function IsKnocked(plr)
    if not plr.Character then return false end
    local hum = plr.Character:FindFirstChildOfClass("Humanoid")
    if hum and hum.Health <= 0 then return true end
    local be = plr.Character:FindFirstChild("BodyEffects")
    if be then
        if be:FindFirstChild("K.O") and be["K.O"].Value then return true end
        if be:FindFirstChild("Dead") and be.Dead.Value then return true end
    end
    return plr.Character:FindFirstChild("GRABBING_CONSTRAINT") ~= nil
end

local function IsValidTarget(plr)
    if not plr or not plr.Character then return false end
    local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
    local hum = plr.Character:FindFirstChildOfClass("Humanoid")
    if not hrp or not hum or hum.Health <= 0 then return false end
    if shared.eluon['SilentAim'].KnockedCheck and IsKnocked(plr) then return false end
    return true
end

local function CanSee(part)
    if not shared.eluon['SilentAim'].WallCheck or not part then return true end
    local origin = Camera.CFrame.Position
    local dir = part.Position - origin
    local params = RaycastParams.new()
    params.FilterDescendantsInstances = {LP.Character}
    params.FilterType = Enum.RaycastFilterType.Blacklist
    local result = workspace:Raycast(origin, dir, params)
    return not result or result.Instance:IsDescendantOf(part.Parent)
end

local function GetClosestBodyPart(plr)
    local bestPart, bestDist = nil, math.huge
    local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    for _, name in bodyParts do
        local part = plr.Character:FindFirstChild(name)
        if part and CanSee(part) then
            local pos, onscreen = Camera:WorldToViewportPoint(part.Position)
            if onscreen then
                local dist = (Vector2.new(pos.X, pos.Y) - center).Magnitude
                if dist <= shared.eluon['FOV']['Value'] and dist < bestDist then
                    bestDist = dist
                    bestPart = part
                end
            end
        end
    end
    return bestPart
end

local function GetClosestPlayer()
    local best, bestDist = nil, math.huge
    local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    for _, plr in Players:GetPlayers() do
        if plr ~= LP and IsValidTarget(plr) then
            local part = GetClosestBodyPart(plr)
            if part then
                local pos = Camera:WorldToViewportPoint(part.Position)
                local dist = (Vector2.new(pos.X, pos.Y) - center).Magnitude
                if dist < bestDist then
                    bestDist = dist
                    best = plr
                end
            end
        end
    end
    return best
end

RunService.Heartbeat:Connect(function()
    local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    fov.Position = center
    fov.Color = (shared.eluon['Mode'] == "Camlock" and Target) and Color3.fromRGB(0,255,0) or shared.eluon['FOV']['Color']

    if Target and IsValidTarget(Target) then
        local pos, onscreen = Camera:WorldToViewportPoint(Target.Character.HumanoidRootPart.Position)
        if onscreen then
            tracer.From = center
            tracer.To = Vector2.new(pos.X, pos.Y)
            tracer.Visible = true
        else
            tracer.Visible = false
        end
    else
        tracer.Visible = false
        Target = nil
    end
end)

-- GUI + Draggable Button
local Gui = Instance.new("ScreenGui", CoreGui)
Gui.ResetOnSpawn = false
Gui.DisplayOrder = 999999999

local Btn = Instance.new("TextButton", Gui)
Btn.Size = UDim2.new(0,135,0,135)
Btn.Position = UDim2.new(1,-165,0.5,-67)
Btn.BackgroundColor3 = Color3.fromRGB(12,12,18)
Btn.BackgroundTransparency = 0.4
Btn.Text = ""
Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,28)

local Icon = Instance.new("ImageLabel", Btn)
Icon.Size = UDim2.new(0,80,0,80)
Icon.Position = UDim2.new(0.5,-40,0.5,-40)
Icon.BackgroundTransparency = 1
Icon.Image = "rbxassetid://102297415885613"
Icon.ImageTransparency = 0.6

local dragging, dragStart, startPos
Btn.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = i.Position
        startPos = Btn.Position
    end
end)
Btn.InputChanged:Connect(function(i)
    if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
        local delta = i.Position - dragStart
        Btn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
Btn.InputEnded:Connect(function() dragging = false end)

Btn.MouseButton1Click:Connect(function()
    if PanicMode then return end
    if shared.eluon['Mode'] == "Silent" then
        shared.eluon['Mode'] = "Camlock"
        Target = GetClosestPlayer()
        Icon.ImageTransparency = 0
    else
        shared.eluon['Mode'] = "Silent"
        Target = nil
        Icon.ImageTransparency = 0.6
    end
end)

-- Movement
RunService.Stepped:Connect(function()
    if not shared.eluon['PlayerModification']['Movement']['Enabled'] then return end
    local hum = LP.Character and LP.Character:FindFirstChildOfClass("Humanoid")
    if hum then
        if shared.eluon['PlayerModification']['Movement']['SpeedModifications']['Enabled'] then
            hum.WalkSpeed = 16 + shared.eluon['PlayerModification']['Movement']['SpeedModifications']['Value']
        end
        if shared.eluon['PlayerModification']['Movement']['JumpModifications']['Enabled'] then
            hum.JumpPower = 50 * shared.eluon['PlayerModification']['Movement']['JumpModifications']['Value']
        end
    end
end)

-- Camlock
RunService.Heartbeat:Connect(function()
    if shared.eluon['Mode'] ~= "Camlock" or not Target or not IsValidTarget(Target) then return end
    local char = Target.Character
    local hrp = char.HumanoidRootPart
    local head = char:FindFirstChild("Head") or hrp
    local p = shared.eluon['Camlock']['Prediction']
    local vel = hrp.AssemblyLinearVelocity
    local mult = GetPlayerModifier(Target)
    local pred = Vector3.new(vel.X * p['X'] * mult, vel.Y * p['Y'], vel.Z * p['Z'] * mult)

    if shared.eluon['Camlock']['AirBoost'].Enabled then
        if vel.Y > 15 then pred += Vector3.new(0, shared.eluon['Camlock']['AirBoost'].Jump, 0) end
        if vel.Y < -15 then pred += Vector3.new(0, -shared.eluon['Camlock']['AirBoost'].Fall, 0) end
    end

    Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, head.Position + pred), shared.eluon['Camlock'].Smoothness)
end)

-- Silent Aim
local oldIndex
oldIndex = hookmetamethod(game, "__index", function(self, key)
    if not checkcaller() and self == Mouse and (key == "Hit" or key == "hit") and shared.eluon.Enabled and not PanicMode and shared.eluon['Mode'] == "Camlock" then
        local useTarget = Target or GetClosestPlayer()
        if useTarget and IsValidTarget(useTarget) then
            local part = shared.eluon['SilentAim']['HitPart'] == 'Closest Part' and GetClosestBodyPart(useTarget) or useTarget.Character:FindFirstChild(shared.eluon['SilentAim']['HitPart'])
            if part and CanSee(part) then
                local hrp = useTarget.Character.HumanoidRootPart
                local p = shared.eluon['SilentAim']['Prediction']
                local vel = hrp.AssemblyLinearVelocity
                local mult = GetPlayerModifier(useTarget)
                local pred = Vector3.new(vel.X * p['X'] * mult, vel.Y * p['Y'], vel.Z * p['Z'] * mult)

                if shared.eluon['SilentAim']['AirBoost'].Enabled then
                    if vel.Y > 15 then pred += Vector3.new(0, shared.eluon['SilentAim']['AirBoost'].Jump, 0) end
                    if vel.Y < -15 then pred += Vector3.new(0, -shared.eluon['SilentAim']['AirBoost'].Fall, 0) end
                end
                return CFrame.new(part.Position + pred)
            end
        end
    end
    return oldIndex(self, key)
end)

-- Spread + Shotgun Bypass
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local method = getnamecallmethod()
    local args = {...}

    if shared.eluon['PlayerModification']['WeaponModifications']['Enabled'] and method == "InvokeServer" then
        local toolName = tostring(self.Parent)
        local mods = shared.eluon['PlayerModification']['WeaponModifications']
        if toolName:find("Double") or toolName:find("DB") then
            if args[1] == "Shoot" and args[2] then args[2] = mods["Double-Barrel SG"].Value end
        elseif toolName:find("Tactical") then
            if args[1] == "Shoot" and args[2] then args[2] = mods["TacticalShotgun"].Value end
        elseif toolName:find("Shotgun") or toolName:find("SG") then
            if args[1] == "Shoot" and args[2] then args[2] = mods["Other Shotguns"].Value end
        end
        return oldNamecall(self, unpack(args))
    end

    if shared.eluon['SpreadModifier'].Enabled and args[3] and typeof(args[3]) == "number" then
        args[3] = shared.eluon['SpreadModifier'].Value
        return oldNamecall(self, unpack(args))
    end

    return oldNamecall(self, ...)
end)

-- TriggerBot
local lastShot = 0
RunService.RenderStepped:Connect(function()
    if not shared.eluon['TriggerBot'].Enabled or shared.eluon['Mode'] ~= "Camlock" or not Target or not IsValidTarget(Target) then return end
    if tick() - lastShot < shared.eluon['TriggerBot'].TriggerDelay then return end
    local char = LP.Character
    if not char then return end
    for _, tool in char:GetChildren() do
        if tool:IsA("Tool") and shared.eluon['TriggerBot'].BlacklistedTools[tool.Name] then return end
    end
    local ray = Ray.new(Camera.CFrame.Position, Camera.CFrame.LookVector * shared.eluon['TriggerBot'].MaxDistance)
    local hit = workspace:FindPartOnRayWithIgnoreList(ray, {char})
    if hit and hit:IsDescendantOf(Target.Character) then
        for _, tool in char:GetChildren() do
            if tool:IsA("Tool") then tool:Activate() end
        end
        lastShot = tick()
    end
end)

-- Panic Key
UserInputService.InputBegan:Connect(function(i)
    if i.KeyCode == Enum.KeyCode.L then
        PanicMode = not PanicMode
        Target = nil
        shared.eluon['Mode'] = "Silent"
        Icon.ImageTransparency = 0.6
    end
end)
